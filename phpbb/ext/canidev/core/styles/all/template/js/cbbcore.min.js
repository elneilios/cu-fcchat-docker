/**
 * @package cBB Core
 * @version 1.1.10 24/02/2025
 *
 * @copyright (c) 2025 CaniDev
 * @license https://creativecommons.org/licenses/by-nc/4.0/
 */
var cbbCore=window.cbbCore||{};((u,a,d)=>{var o,i,s,e,t,n,r,c;function l(e){var t=e.lastIndexOf(".");return[e.substring(0,t),e.substring(t+1)]}cbbCore.activate||(o={},i={},s={},u.extend(cbbCore,{JSON_ERROR:1,JSON_SUCCESS:2,QUOTE_AUTO:1,QUOTE_ALWAYS:2,QUOTE_NEVER:3,activate:!0,browser:null,_isLoaded:!1,_isReady:!1,getService:function(e){return"core"==e?this:this.hasService(e)?i[e]:null},hasService:function(e){return void 0!==i[e]},extendService:function(e,t){var n=this.getService(e);null!==n&&u.each(t,function(e,t){if(void 0!==n[e])return!0;n[e]=t})},initService:function(e,t){e=this.getService(e);null!==e&&(e.options=u.extend({},e.options,t),e.__construct)&&e.__construct()},registerService:function(e,t,n){void 0===i[e]&&(i[e]=u.extend({},i[e],t),!1!==n)&&this.initService(e,{})},addListener:function(e,t){t=void 0!==t&&t;var n,i,r=this;if("string"==typeof e){var a=e.split(" ").filter(e=>1<e.length);if(1<a.length){for(let e=0;e<a.length;e++)r.addListener(a[e],t);return!0}}return"object"==typeof e?(u.each(e,function(e,t){r.addListener(e,t)}),!0):"core.onready"==e&&this._isReady||"core.onload"==e&&this._isLoaded?(t.apply(u),!0):(i=(n=l(e))[0],e=n[1],void 0===o[i]&&(o[i]={}),void 0===o[i][e]&&(o[i][e]=[]),void o[i][e].push(t))},hasListener:function(e){e=l(e);return void 0!==o[e[0]]&&void 0!==o[e[0]][e[1]]},dispatchEvent:function(e,n){e instanceof u.Event?(t=l(e.type),n=e):t=l(e);var e=t[0],t=t[1],i=Array.isArray(n);if("core"==e){if("onready"==t&&this._isReady||"onload"==t&&this._isLoaded)return!0;"onload"!=t||this._isReady||cbbCore.dispatchEvent("core.onready"),this._isReady="onready"==t||this._isReady,this._isLoaded="onload"==t||this._isLoaded}return o[e]&&o[e][t]&&u.each(o[e][t],function(e,t){t=i?t.apply(u,n):t.call(u,n);if(!1===t)return!1;"object"==typeof t&&(n=u.extend(n,t))}),n},loadStylesheet:function(e,t){t=t||d,e&&(d.createStyleSheet?t.createStyleSheet(e):u(t).find("head").append('<link rel="stylesheet" type="text/css" href="'+e+'" />'))},loadScript:function(e,t){u.ajax({url:e,dataType:"script",cache:!0}).done(t).fail(this.ajaxErrorCode)},rgbToHex:function(e){return this.colorToHex(e)},colorToHex:function(e,t){var n,i;return t=!1!==t,e?(i=null,"object"==typeof e?e.r?(i=e,t||(i.a=1)):i={r:e[0],g:e[1],b:e[2]}:(n=e.match(/rgba\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3}),\s*?([\d{1,3}\.]+)\)/i))?i={r:n[1],g:n[2],b:n[3],a:t?parseFloat(n[4]).toFixed(2):1}:(n=e.match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))&&(i={r:n[1],g:n[2],b:n[3]}),null!==i?(t=i.a&&1!=i.a?(255*i.a).toString(16).substring(0,2):"","#"+r(i.r)+r(i.g)+r(i.b)+(1==t.length?"0":"")+t):"#"!=e[0]||9!=e.length&&7!=e.length?(n=e.match(/^#?((?:[0-9A-F]{3}){1,2})$/i))?"#"+(e=(e=n[1]).length<5?e.split("").map(function(e){return e+e}).join(""):e):"":e):"";function r(e){return("0"+parseInt(e).toString(16)).slice(-2)}},isJSON:function(e){try{if("object"==typeof JSON.parse(e))return!0}catch(e){return!1}},isRtl:function(){var e=u("html").attr("dir");return e&&"RTL"==e.toUpperCase()},isTouchDevice:function(){return"ontouchstart"in a||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints},strToJson:function(e){let t;try{t=JSON.parse(e)}catch(e){t={}}return t},lang:function(e,t,r){if("object"==typeof e)u.extend(s,e);else{var n,a;if(!t)return n=s[e]||e,void(a=0)!==r?n.replace(/%(?:(\d{1})\$)?([sd]+)/g,function(e,t,n){var i="";return t?(t=cbbCore.intval(t),i=r[t-1]||""):(i=r[a]||"",a++),i=i&&"d"==n?cbbCore.intval(i):i}):n;s[e]=t}},intval:function(e,t){switch(typeof e){case"boolean":return+e;case"string":return e=parseInt(e,t||10),isNaN(e)||!isFinite(e)?0:e;case"number":if(isFinite(e))return 0|e}return 0},serializeVars:function(e,t,n,i){var r,a=[],o=this;return i=i||o.QUOTE_AUTO,u.each(e,function(e,t){if(""===t||null==t)return!0;!0===n&&(t=encodeURIComponent(t)),r=i==o.QUOTE_ALWAYS||i==o.QUOTE_AUTO&&-1!=String(t).indexOf(" ")?'"':"",a.push(e+"="+r+t+r)}),a.join(t)},unserializeVars:function(e){var n={},e=e.replace(/^\?/,"").replace(/&amp;/g,"&").split("&");return u.each(e,function(e,t){2==(t=t.split("=")).length&&(n[t[0]]=decodeURIComponent(t[1]))}),n},ajaxErrorCode:function(e){if(e.responseText){var t=e.responseText.toString();if(-1!=t.indexOf("<body")){var t=u(t),n="";if(n=(t.find("#message").length?t.find("#message"):t.find("#page-body")).html())return void u("<div>"+n+"</div>").cbbDialog({width:600})}}console.log(e)},colourIsDark:function(e,t){var n,i;return"#00000000"!==(e=this.colorToHex(e))&&(n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),e=parseInt(e.slice(5,7),16),void 0!==n)&&(299*n+587*i+114*e)/1e3<(t=t||125)},_measureScrollBar:null,measureScrollBar:function(e){var t,n;return e||null===this._measureScrollBar?((t=u('<div class="cbb-scroll-measure" />')).appendTo(e||"body"),n={w:(n=t[0]).offsetWidth-n.clientWidth,h:n.offsetHeight-n.clientHeight,side:"right"},t.remove(),!this.isRtl()||this.browser.chrome||this.browser.mozilla||(n.side="left"),e||(this._measureScrollBar=n),n):this._measureScrollBar},colorPalette:function(e,t){for(var n=0,i=0,r=0,a="",o=["00","40","80","BF","FF"],n=0;n<5;n++)for(i=0;i<5;i++)for(r=0;r<5;r++)a+=this.template.parse('<a href="#" data-color="<%color%>" style="background-color: <%color%>;"></a>',{color:"#"+String(o[n])+String(o[i])+String(o[r])});e.addClass("cbb-color-palette").html(a).children("a").on("click",function(e){e.preventDefault(),t(u(this).attr("data-color"),this)})},floatMessage:function(e,t,n,i){var r=t||2e3,a=u("body").children(".cbb-float-message");if(n=n?n==this.JSON_ERROR?"error":"ok":"highlight",!1!==e&&!0!==e){if(e){if(a.remove(),(a=u('<div class="cbb-float-message cbb-state-'+n+'">'+(e="loading"==e?'<div class="cbb-loading"><span></span></div>':e)+"</div>")).appendTo("body"),-1===t)return!0;setTimeout(function(){a.fadeOut("slow",function(){u(this).remove(),"function"==typeof i&&i()})},r)}}else!0===e?a.remove():a.fadeOut("slow",function(){u(this).remove()})},copyToClipboard:function(e){if(navigator.clipboard)return navigator.clipboard.writeText(e),!0;var t=!1,e=u("<textarea></textarea>").css({"font-size":"12pt",border:"none",padding:0,margin:0,position:"absolute",top:-9999}).prop("readonly",!0).val(e).appendTo("body").get(0);e.select(),e.setSelectionRange(0,e.value.length);try{d.execCommand("copy"),t=!0}catch(e){}return d.body.removeChild(e),t},executePostponedCode:function(){var t=this;u(".cbb-inputbox-labelled input").off("focus blur").removeClass("animated").on("focus blur",function(e){u(this).toggleClass("active",!("focus"!=e.type&&!this.value.length))}).blur(),setTimeout(function(){u(".cbb-inputbox-labelled input").addClass("animated")},100),u('[data-ajaxify="true"]').cbbAjaxify({onSuccess:function(e,t){"delete"==t.action&&e.id&&u('[data-row-id="'+e.id+'"]').fadeOut("fast",function(){u(this).remove()})}}),a._jPostponed&&(a._jPostponed.forEach(function(e){"function"==typeof e?e.call(t):t.call.apply(t,e)}),a._jPostponed=null)},call:function(e){var t,n=Array.prototype.slice.call(arguments,1),i=this;return"@"==e.charAt(0)&&(t=e.split("/"),i=this.getService(t[0].replace("@","")),e=t[1]),i&&i[e]?i[e].apply(i,n):null},createMenu:function(e,t){for(var n=u('<ul class="cbb-menu"></ul>'),i=0;i<e.length;i++){var r=e[i],a=u("<li></li>");"object"!=typeof r||r.jquery||(r=this.template.parse('<a href="#" data-action="<%action%>"><%icon%><%text%></a>',r)),a.append(r).appendTo(n)}return t&&n.addClass(t),n}}),cbbCore.cookie={get:function(e,t){for(var n=e+"=",i=d.cookie.split(";"),r=0;r<i.length;r++){var a=u.trim(i[r]);if(0==a.indexOf(n))return a=a.substring(n.length,a.length),u.isNumeric(a)&&!1!==t?parseInt(a):a}return""},set:function(e,t,n){var i=new Date,r=a.location.host.toString(),n=(-1!=n&&(n=n||90,i.setTime(i.getTime()+24*n*60*60*1e3)),["expires="+(""===t||-1==n?-1:i.toGMTString()),"path=/"]),i=r.match(/(.*?\.)?([a-z0-9\-_]+\.[\w\d]+(?:\.[\w\d]+)?)$/);i&&n.push("domain="+i[2]),d.cookie=e+"="+(u.isArray(t)?t.join(":"):t)+"; "+n.join("; ")}},cbbCore.template={get:function(e,t,n){let i=u('script[id="tpl-'+e+'"], template[id="'+e+'"]').html();return!1!==t&&(i=this.parse(i,t)),n?u(i):i},remove:function(e){u('script[id="tpl-'+e+'"], template[id="'+e+'"]').remove()},parse:function(e,n){return e?(n="object"==typeof n?n:{},e.replace(/(?:<|&lt;)%\s?([a-zA-Z0-9_]+)\s?%(?:>|&gt;)/g,function(e,t){return 0===t.indexOf("L_")?cbbCore.lang(t.substring(2)):void 0!==n[t]?n[t]:""})):""}},cbbCore.storage={get:function(e,t){t=a[!0===t?"sessionStorage":"localStorage"].getItem(e);return cbbCore.isJSON(t)?JSON.parse(t):t},remove:function(e,t){return(!0===t?sessionStorage:localStorage).removeItem(e)},set:function(e,t,n){var i,r;return t?(i=!0===n?"sessionStorage":"localStorage","object"==typeof(r=t)&&(r=JSON.stringify(t)),a[i].setItem(e,r),!0):(this.remove(e,n),!1)}},cbbCore.adminInit=function(){u("#acp dd").find("input, select, textarea").filter(':not([type="hidden"])').addClass("cbb-inputbox no-auto-resize");var e=u("<div />").appendTo("#content");e.addClass("cbb-actions-container"),a.__report&&u("<a />").appendTo(e).attr({href:a.__report.url,title:a.__report.title}).html('<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>').click(function(e){e.preventDefault(),cbbCore.request({url:this.href,data:{send_report:1},onDialogSubmit:function(e,t){return 2<t.description.length},onSuccess:function(e){this.floatMessage(e.message,null,e.status)}})}),a.__helpIcon&&u("<a />").appendTo(e).attr({href:a.__helpIcon.url,title:a.__helpIcon.title}).html('<i class="fa fa-question-circle" aria-hidden="true"></i>').click(function(e){a.open(this.href),e.preventDefault()}),u("form.cbb-ajax-form").submit(function(t){let n=u(this).serializeObject();return t.originalEvent.submitter&&(n[t.originalEvent.submitter.name]=t.originalEvent.submitter.value),!!n.search||!n.action||(cbbCore.request({url:u(this).attr("action"),data:n,onSuccess:function(e){cbbCore.dispatchEvent("core.ajaxform.submit",{data:n,id:t.target.id,response:e})}}),t.preventDefault(),t.stopPropagation(),!1)})},cbbCore.bindGroupSelector=function(e){u(e=e||".cbb-groups-selector").find('select, input[name^="all_groups"]').off("change"),u(e).find("select").change(function(){u(this).parent().find('input[name^="all_groups"]').prop("checked",!1),u(this).parent().find('input[name^="default_groups"] + label').objView(!0)}),u(e).find('input[name^="all_groups"]').change(function(){var e=u(this).prop("checked");e&&(u(this).parent().siblings("select").val(0),u(this).siblings('input[name^="default_groups"]').prop("checked",!1)),u(this).siblings('input[name^="default_groups"] + label').objView(!e)}).change()},cbbCore.bindSearchInput=function(){let t=u('.cbb-search-input input[type="text"]');var e;t.on({"input.core":function(){u(this).val()||u(this).siblings(".cbb-search-reset").remove()},"keypress.core":function(e){if(13==e.which)return u(this).closest(".cbb-search-input").find('input[type="submit"], input[type="button"]').first().click(),e.preventDefault(),!1}}),t.val()&&(e=u('<a href="#" class="cbb-search-reset"><i class="fa fa-close"></i></a>'),t.closest(".cbb-search-input").addClass("active"),t.after(e),e.on("click.core",function(e){e.preventDefault();e=t.attr("name"),e=a.location.href.replace(new RegExp("(\\?|&)"+e+"=[^&]+(&|$)"),"$1").replace(/&$/,"");a.location.href=e}))},n=navigator.userAgent.toLowerCase(),(e=(r=/trident\/.*rv:([0-9.]+)/.exec(n))?{browser:"msie",version:parseFloat(r[1])}:{browser:(r="webkit"==(r=/(msie)[ \/]([0-9\.]+)/.exec(n)||/(edge)[ \/]([0-9\.]+)/.exec(n)||/(chrome)[ \/]([0-9\.]+)/.exec(n)||/(webkit)[ \/]([0-9\.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([0-9\.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([0-9\.]+)|)/.exec(n)||[])[1]&&n.indexOf("safari")&&(e=/version[ \/]([0-9\.]+)/.exec(n))?[r[0],"safari",e[1]]:r)[1]||"",version:parseFloat(r[2])||0}).browser&&(e[e.browser]=!0),r="",c=null,/(ipad|iphone|ipod)/.test(n)?(r="ios",(t=/os ([0-9_]+)/.exec(n))&&(c=parseFloat(t[1].replace("_",".")))):(t=/android[ \/]([0-9\.]+)/.exec(n))?(r="android",c=parseFloat(t[1])):/windows /.test(n)?r="windows":/linux/.test(n)?r="linux":/mac os/.test(n)&&(r="mac"),e.os=r,e.osVersion=c,r&&(e[r]=!0),e.isMobile=!1,"ios"!=r&&"android"!=r&&!/(mobile|symbianos|opera m|htc_|fennec|kindle|blackberry)/.test(n)||(e.isMobile=!0),cbbCore.browser=e,u.extend(u.fn,{cbbCaret:function(e,t,n){var i,r,a,o=!1,s=!1,c=u(this).get(0),l=!(!cbbCore.browser.msie||!d.selection);if(c instanceof HTMLTextAreaElement||c instanceof HTMLInputElement&&-1!=u.inArray(c.type,["text","search","password","tel","url"])){if("object"==typeof e?(o=e.start,s=e.end):null!=e&&(o=e,s=null!=t?t:e),!1===o)return void 0===c?{start:0,end:0,text:"",replace:function(){}}:(a=l?(t=d.selection,"textarea"!=c.tagName.toLowerCase()?(e=this.val(),(r=t.createRange().duplicate()).moveEnd("character",e.length),i=""==r.text?e.length:e.lastIndexOf(r.text),(r=t.createRange().duplicate()).moveStart("character",-e.length),r.text.length):(c.focus(),(e=(r=t.createRange()).duplicate()).moveToElementText(c),e.setEndPoint("EndToEnd",r),(i=e.text.length-r.text.length)+r.text.length)):(i=c.selectionStart,c.selectionEnd),{start:i,end:a,text:c.value.substring(i,a),replace:function(e){return c.value.substring(0,i)+e+c.value.substring(a,c.value.length)}});void 0!==c&&(l?((t=c.createTextRange()).collapse(!0),t.moveStart("character",o),t.moveEnd("character",s-o),t.select()):(c.selectionStart=o,c.selectionEnd=s),!1!==n)&&c.focus()}return this},markSelector:function(r){let a=u(this);return a.find(".cbb-mark-selector").each(function(){let n=u(this),i=n.attr("data-key");n.change(function(){a.find('input[name="'+i+'[]"]').prop("checked",n.prop("checked")),r&&r.call(this)}),a.find('input[name="'+i+'[]"]').change(function(){var e=a.find('input[name="'+i+'[]"]'),t=e.filter(":checked");n.prop("checked",t.length&&e.length==t.length),n.prop("indeterminate",t.length&&e.length!=t.length),r&&r.call(this)})})},removeStyle:function(e){e=e.split(" ");var n=new RegExp("\\s?("+e.join("|")+")[^;]+;?\\s?","g");return u(this).each(function(){u(this).attr("style",function(e,t){if(t)return t.replace(n,"")})}),this},serializeObject:function(a){let n=[],o={},s={},c={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,named:/^[a-zA-Z0-9_]+$/};function l(e,t,n){return e[t]=n,e}return u(this).is("form")?n=u(this).serializeArray():u(this).find("[name], [data-name]").each(function(){var e=u(this),t=e.is("input, textarea, select");n.push({name:t?e.attr("name"):e.attr("data-name"),value:t?e.val():e.attr("data-value")})}),u.each(n,function(){if(!c.validate.test(this.name))return!0;let e,t=this.name.match(c.key),n=this.value,i=this.name;for(;void 0!==(e=t.pop());)i=i.replace(new RegExp("\\["+e+"\\]$"),""),e.match(c.push)?n=l([],(r=i,void 0===s[r]&&(s[r]=0),s[r]++),n):e.match(c.named)&&(n=l({},e,n));var r;if("object"==typeof a&&-1!=u.inArray(Object.keys(n)[0],a))return!0;o=u.extend(!0,o,n)}),o},objView:function(e,t){return u(this).toggleClass("cbb-helper-hidden"+(t?"-soft":""),!e)},cbbLoading:function(e,t,n,i){return!1===e?u(this).find(".cbb-loading").remove():(e=u('<div class="cbb-loading"><span></span></div>'),n=!1===n?"append":"html",i&&e.addClass(i),!1!==t&&e.css({height:u(this).height(),margin:0}),u(this)[n].call(this,e)),this}}))})(jQuery,window,document);

((a,t)=>{var c={defaultOptions:{},__construct:function(t,n){return this.element=t,this.options=a.extend(!0,{},this.defaultOptions,n),this.init(),this},_recall:function(t){a.extend(this.options,t)},setOption:function(t,n){this.options[t]=n}};t.newHandler=function(o,r){a.fn[o]=function(i){var e=Array.prototype.slice.call(arguments,1),s=this;return"string"!=typeof i||a(this).length?(a(this).each(function(){var t,n=a(this).data(o);"string"==typeof i?"instance"==i?s=n:n&&"destroy"==i?a(this).removeData(o):n&&n[i]&&"_"!=i.charAt(0)&&(s=n[i].apply(n,e)):n?n._recall(i):((t=function(){this.__construct.apply(this,arguments)}).prototype=a.extend(!0,{},c,r),n=new t(a(this),i),a(this).data(o,n))}),s):null}}})(jQuery,cbbCore);

((i,c)=>{var u=[];function d(e){return-1!=i.inArray(e,u)||!!i('script[src="'+e+'"], link[href="'+e+'"]').length}c.request=function(s){var r=this;return!1!==s.showLoading&&i("body").addClass("cbb-helper-wait"),i.ajax(i.extend(!0,{},s,{type:"POST",dataType:"json",crossDomain:!1,success:function(n){var e,t=0,a=0;n.status=n.status||r.JSON_SUCCESS,n.components&&(n.components.asset&&!1!==s.loadAssets&&i.each(n.components.asset,function(e,o){o.IS_SINGLE&&("text/javascript"==o.TYPE&&o.SRC?d(o.SRC)||(t++,r.loadScript(o.SRC,function(){u.push(o.SRC),a++})):"core-lang"==o.ID?r.lang(r.strToJson(o.DATA)):o.SRC&&!d(o.SRC)&&(r.loadStylesheet(o.SRC),u.push(o.SRC)))}),n.components.lang)&&r.lang(n.components.lang),n.S_CONFIRM_ACTION?(i("body").removeClass("cbb-helper-wait"),n.confirmDialog=i(n.MESSAGE_BODY).cbbDialog({autoClean:!1,destroyOnClose:!0,closeOnSubmit:!1,width:n.dialogWidth||400,onClose:function(){"function"==typeof s.onDialogClose&&s.onDialogClose.call(this,n)},onOpen:function(){"function"==typeof s.onDialogOpen&&s.onDialogOpen.call(this,n),r.executePostponedCode()},onSubmit:function(e,o){var t=!0;!1!==(t="function"==typeof s.onDialogSubmit?s.onDialogSubmit.call(this,n,e):t)&&(e.confirm=n.isModalDialog?1:i(o).attr("data-confirm"),s.data=i.extend(!0,{},s.data,e),this.cbbDialog("close"),r.request(s))}}),l("onComplete",n)):n.redirect||n.reload?setTimeout(()=>{n.redirect&&(window.location.href=o(n.redirect)),n.reload&&window.location.reload()},200):(n.MESSAGE_TEXT&&(n.message=n.MESSAGE_TEXT,n.status=n.S_USER_NOTICE?r.JSON_SUCCESS:r.JSON_ERROR),n.status==r.JSON_SUCCESS?(e=null,e=setInterval(function(){t==a&&(i("body").removeClass("cbb-helper-wait"),clearInterval(e),l("onSuccess",n,s.data),s.preventPosponedCode||c.executePostponedCode(),n.message?r.floatMessage(n.message,null,n.status,()=>{n.returnUrl&&(window.location.href=o(n.returnUrl)),l("onComplete",n)}):l("onComplete",n))},200)):(i("body").removeClass("cbb-helper-wait"),r.floatMessage(n.message,null,n.status),l("onFail",n),l("onComplete",n)))},error:function(e){i("body").removeClass("cbb-helper-wait"),l("onError",e),l("onComplete",{error:!0}),r.ajaxErrorCode(e)}}));function o(e){return e.replace(/&amp;/g,"&")}function l(e,...o){"function"==typeof s[e]&&(s[e].apply(r,o),c.dispatchEvent("core.request."+e,o))}}})(jQuery,cbbCore);

((r,u)=>{u.newHandler("cbbAutocomplete",{defaultOptions:{autoClose:!0,data:{},onBuild:null,onClick:null,url:"",resultsKey:"results",rowBuilder:null,timeout:500},inSelector:!1,selector:r([]),timer:null,init:function(){let t=this;t.options.url=t.element.attr("data-api-url")||t.options.url,t.element.is("input")&&t.options.url&&t.element.prop("autocomplete","off").off("input").on({input:function(e){clearTimeout(t.timer),t.timer=setTimeout(()=>{t._trigger(e)},t.options.timeout)},"scroll blur click":function(){t.inSelector||t.hideSelector()}})},hideSelector:function(){this.selector.remove(),this.inSelector=!1},_trigger:function(){let i=this,e=this.element.val();e.length<3?i.hideSelector():u.request({url:i.options.url,data:r.extend({},i.options.data,{query:e}),preventPosponedCode:!0,onSuccess:function(e){var t=e[i.options.resultsKey]||[],o=i.element.offset();if(i.hideSelector(),e.htmlContent||t.length){if(e.htmlContent)i.selector=r(e.htmlContent);else{var n=r('<ul class="cbb-menu"></ul>');if("function"==typeof i.options.rowBuilder)for(var l of t)r("<li/>").append(i.options.rowBuilder.call(i,l)).appendTo(n);i.selector=r('<div class="cbb-dropdown"></div>').append(n)}i.selector.appendTo("body").css({top:o.top+i.element.outerHeight(),left:u.isRtl()?"unset":o.left,right:u.isRtl()?r("body").width()-o.left-i.element.outerWidth():"unset","z-index":u.intval(i.element.closest(".cbb-dialog").css("z-index"))+1}).on({mouseenter:function(){i.inSelector=!0},mouseleave:function(){i.inSelector=!1}}).find("a").click(function(e){e.preventDefault(),"function"==typeof i.options.onClick&&i.options.onClick.call(i,e.currentTarget),i.options.autoClose&&i.hideSelector()}),"function"==typeof i.options.onBuild&&i.options.onBuild.call(i,e)}},onError:function(){i.hideSelector()}})}})})(jQuery,cbbCore);

((s,l)=>{l.newHandler("cbbAjaxify",{defaultOptions:{onCreate:null,onDialogOpen:null,onDialogSubmit:null,onSuccess:null,beforeSubmit:null},init:function(){var t=this;if(!this.element.is(".noajax"))if("function"==typeof this.options.onCreate&&this.options.onCreate.call(this),this.element.is("form"))this.element.find("textarea").css("resize","none"),this.element.on("submit",function(){return!1}).find("input[type=submit], button[type=submit]").click(function(){var e={};return e[s(this).attr("name")]=s(this).val(),!0===t.submit(e)&&(t.element.off("submit"),!0)}),t.type="form";else{if(!t.element.is("a"))return!1;t.element.click(function(e){!1===t.submit()&&e.preventDefault()}),t.type="a"}},submit:function(e,t){var n=this,i={};switch(n.type){case"form":i={url:n.element.attr("action"),data:s.extend(n.element.serializeObject(),e),type:t||"POST"};break;case"a":var o=n.element.attr("href").split("?"),i={url:n.element.attr("href"),data:s.extend(l.unserializeVars(o[1]),e),type:t||"GET"};break;default:return!1}if("function"==typeof n.options.beforeSubmit){var a=n.options.beforeSubmit.apply(n.element,[i.data,{type:n.type}]);if(!0===a||!1===a)return a}return s('form .batch-actions select[name="action"]').val(""),i.url||(i.url=window.location.href),i.onDialogSubmit=n.options.onDialogSubmit,i.onDialogOpen=n.options.onDialogOpen,i.onSuccess=function(e,t){"function"==typeof n.options.onSuccess&&n.options.onSuccess.call(n,e,t),l.dispatchEvent("core.ajaxify.onSuccess",[e,t,n.element])},l.request(i),!1}})})(jQuery,cbbCore);

((d,n)=>{var i='<div class="cbb-overlay js-dialog-overlay"></div>',l='<div class="cbb-dialog-header"><a href="#" data-action="close" class="cbb-dialog-close"><i class="fa fa-remove" aria-hidden="true"></i></a><span class="cbb-dialog-title"><%title%></span></div>',a='<div class="cbb-dialog-content"><%content%></div>',c='<button class="<%class%>" value="<%value%>"><%title%></button>',b='<div class="cbb-dialog-buttons"></div>',s={lastID:0,length:0};n.newHandler("cbbDialog",{defaultOptions:{customClass:!1,autoClean:!0,autoFocus:!1,autoClose:!1,autoOpen:!0,buttons:null,closeOnSubmit:!0,destroyOnClose:!1,eyeFix:25,height:"auto",overlay:!0,maxHeight:null,movable:!1,parent:"body",title:"",width:"auto"},init:function(){var t,e,h=this,i=[];if(this.options.title=this.options.title||this.element.attr("title"),this.sizes={height:0,width:0},this.element.hide().attr("title","").appendTo(this.options.parent),!1===this.options.customClass?this.element.addClass("cbb-dialog"):this.element.addClass(this.options.customClass),this.element.is(".cbb-dialog")&&(this.element.find(".cbb-dialog-content").length||this.element.html(n.template.parse(a,{content:this.element.html()})),this.element.prepend(n.template.parse(l,{title:this.options.title||"&nbsp;"})),this.options.title||i.push("notitle"),this.element.find(".cbb-dialog-content").find('input:not([type="button"]), select, textarea').filter(':not([type="hidden"])').addClass("cbb-inputbox"),this.options.buttons)&&!this.element.find(".cbb-dialog-buttons").length){var s=d(b);for(let e in this.options.buttons){var o=n.template.parse(c,{class:"cbb-btn"+(this.options.buttons[e].primary?" default-btn":""),value:e,title:n.lang(this.options.buttons[e].title)}),o=d(o);this.options.buttons[e].callback&&o.on("click",function(t){return h.options.buttons[e].callback.call(h.element,t)}),s.append(o)}this.element.append(s)}i.push(this.options.movable?"movable":"fixed"),this.element.is(".cbb-dialog")&&(t=this.element.attr("data-height"),e=this.element.attr("data-width"),t?this.sizes.height=t:this.options.height&&(this.sizes.height=this.options.height),e?this.sizes.width=e:this.options.width&&(this.sizes.width=this.options.width),this.sizes.width&&d.isNumeric(this.sizes.width)&&this.element.css("width",this.sizes.width),this.sizes.height&&d.isNumeric(this.sizes.height)&&this.element.find(".cbb-dialog-content").css("height",this.sizes.height),this.options.maxHeight)&&d.isNumeric(this.options.maxHeight)&&this.element.find(".cbb-dialog-content").css("max-height",this.options.maxHeight),this.element.addClass(i.join(" "));this.element.find(".cbb-dialog-buttons button, .cbb-dialog-close, .cbb-dialog-sidebarlauncher ").click(function(t){t.preventDefault();t=d(this).is("a")?d(this).attr("data-action"):d(this).val();h[t]&&!h.element.is(":disabled")&&h[t](d(this))}),this.options.movable&&this.element.children(".cbb-dialog-header").on("mousedown.cbbDialog",function(t){if(t.preventDefault(),h.element.is(".disabled"))return!1;var e=h.element.offset(),i=t.pageX-e.left,s=t.pageY-e.top,o=h.element.outerWidth(),n=h.element.outerHeight(),l=d(window).width()+d(document).scrollLeft(),a=d(window).height()+d(document).scrollTop();h._getSize(),d(document).on({"mousemove.cbbDialog":function(t){t={left:Math.max(0,t.pageX-i),top:Math.max(0,t.pageY-s)};l<t.left+o&&(t.left=l-o),a<t.top+n&&(t.top=a-n),h.element.css(t)},"mouseup.cbbDialog":function(){d(document).off("mousemove.cbbDialog mouseup.cbbDialog")}})}),this.options.autoOpen&&this.open()},center:function(){var t,e,i="body"==this.options.parent?d(window):d(this.options.parent),s=i.width(),i=i.height(),s=(this.options.movable?(o=d(document).scrollTop(),t=Math.min(this.sizes.width,s-15),s=s/2+d(document).scrollLeft(),e=i/2+o-this.sizes.height/2-this.options.eyeFix,e={left:s-t/2,top:Math.max(e,o),width:t},this.element.css(e)):e=this.element.position(),n.intval(this.element.find(".cbb-dialog-header").outerHeight())+n.intval(this.element.find(".cbb-dialog-buttons").outerHeight())+35),o=e.top+this.element.height()>i-35?i-e.top-s:this.options.maxHeight;this.element.find(".cbb-dialog-content").css("max-height",o||"")},close:function(){var t=this;if(this.id<s.lastID)for(var e=s.lastID;e>this.id;e--)s[e].cbbDialog("close");this.element.fadeOut("fast",function(){t._trigger("onClose"),t.options.destroyOnClose&&t.element.remove(),t.id==s.lastID&&s.lastID--,s.length--,delete s[t.id],s.length?t.enable(s[s.lastID]):(t.options.overlay&&d(".js-dialog-overlay").fadeOut("fast",function(){d(this).remove(),"body"==t.options.parent&&d("body").removeAttr("style")}),d(window).off("resize.cbbDialog"))})},sidebarChange:function(t){this.element.find(".cbb-dialog-sidebar").toggleClass("active"),t.blur()},enable:function(t){(t||this.element).removeClass("disabled").find(".cbb-dialog-mask").remove()},disable:function(t){(t||this.element).addClass("disabled").append('<div class="cbb-dialog-mask"></div>')},open:function(){var t,e;this.element.find(".cbb-dialog-header .cbb-dialog-title").html(this.options.title),this.options.overlay&&!s.length?("body"==this.options.parent&&(t=n.measureScrollBar(),e=n.intval(d("body").css("margin-"+t.side)),d("body").css("margin-"+t.side,e+t.w).css("overflow","hidden")),d(i).appendTo(this.options.parent).fadeIn("fast",d.proxy(this,"_open")),this.options.autoClose&&d(".js-dialog-overlay").click(d.proxy(this,"close"))):this._open()},submit:function(t){if(this.options.onSubmit){var e,i=this.element.find("form").attr("action"),s={};if(i&&-1!=(e=i.indexOf("?"))&&(s=n.unserializeVars(i.substring(e+1))),d.extend(s,this.element.find("form").serializeObject()),!1===this.options.onSubmit.call(this.element,s,t))return!1}this.options.closeOnSubmit&&this.close()},_getSize:function(){this.sizes.width=this.element.outerWidth(),this.sizes.height=this.element.outerHeight()},_open:function(){var t=null,i=this;s.length&&this.disable(t=s[s.lastID]),null!==t&&this.element.css("z-index",n.intval(t.css("z-index"))+1),s.lastID++,s.length++,this.id=s.lastID,s[s.lastID]=this.element,this.element.hide().removeClass("cbb-helper-hidden"),this.element.is(".fixed")?this.element.show():this.element.fadeIn("fast"),this._trigger("onOpen"),this.options.autoClean&&(this.element.find("input[type=text], input[type=number], textarea").val("").filter("[data-default]").each(function(){d(this).val(d(this).attr("data-default"))}),this.element.find("input[type=radio], input[type=checkbox]").prop("checked",!1),this.element.find("select").each(function(){var t=d(this).prop("multiple")?"":d(this).find("option:first").val();d(this).val(t)})),this.options.autoFocus&&setTimeout(function(){var t=!0===i.options.autoFocus?":first":i.options.autoFocus,t=i.element.find("input, textarea").filter(t),e=t.val();t.focus().cbbCaret(e.length)}),this.options.movable&&(this.getSize(),this.element.find("label:first").focus()),setTimeout(d.proxy(this,"center"),this.options.movable?0:200),d(window).on("resize.cbbDialog",d.proxy(this,"center"))},_trigger:function(t){this.options[t]&&this.options[t].call(this.element,d.extend({},this.options,this.sizes,{ui:this.element}))}})})(jQuery,cbbCore);

((c,n)=>{var s={lastID:0,length:0};n.newHandler("cbbDropdown",{defaultOptions:{autoClean:!1,autoClose:!0,autoDestroy:!0,autoFocus:!1,class:"",dispatchCustom:!1,dispatchEvent:"click",forcePosition:!1,selector:"default",showPointer:!0,unique:!0,xPosition:"left",yPosition:"bottom",wrapper:null,adjustMethod:"move",minSize:150,maxSize:null,onClose:null,onCreate:null,onOpen:null},init:function(){var e=this;switch(this.leaveTimer=null,this.triggerTimer=null,this.mouseTarget=null,n.isRtl()&&"right"==e.options.xPosition&&(e.options.xPosition="left"),e.launcher=this.element,e.options.selector){case"auto":e.container=c("<div></div>");break;case"default":e.container=e.element.next("div");break;case"id":e.container=c("#"+e.element.attr("data-id"));break;default:e.container=c(e.options.selector)}!1!==e.options.dispatchEvent&&(n.browser.isMobile&&"hover"==e.options.dispatchEvent&&(e.options.dispatchEvent="contextmenu"),t="hover"==e.options.dispatchEvent?"mouseenter":e.options.dispatchEvent,t+=".dropdown",e.options.dispatchCustom&&(t="dropdown-"+t),e.element.off(t).on(t,function(t){t.preventDefault();var o=[];e.container.is(".visible")?e.close():"hover"==e.options.dispatchEvent?e.triggerTimer=setTimeout(function(){e.mouseTarget=t.target,e.open()},500):("contextmenu"==e.options.dispatchEvent&&(o=[t.pageX,t.pageY+5]),e.mouseTarget=t.target,e.open.apply(e,o))}),"hover"==e.options.dispatchEvent)&&e.element.on("mouseleave.dropdown",function(t){t.preventDefault(),clearTimeout(e.triggerTimer)}),e.container.objView(!1).addClass("cbb-dropdown").addClass(e.options.class).css("min-width",e.options.minSize).css("max-width",e.options.maxSize||null);var t=e.element.closest(".cbb-dialog, .cbb-modal-dialog");t.length&&e.container.css("z-index",n.intval(t.css("z-index"))+1),e.options.showPointer&&e.container.prepend('<span class="cbb-dropdown-pointer"></span>'),"function"==typeof e.options.onCreate&&e.options.onCreate.call(this)},open:function(t,o){var e=this;if("function"==typeof e.options.onOpen&&!1===e.options.onOpen.call(e))return!1;if(s.length&&e.options.unique)for(var i=s.lastID;0<i;i--)s[i].close(!0);switch(e.options.autoClean&&(e.container.find("input[type=text], input[type=number], textarea").val("").filter("[data-default]").each(function(){c(this).val(c(this).attr("data-default"))}),e.container.find("input[type=radio], input[type=checkbox]").prop("checked",!1),e.container.find("select").each(function(){var t=c(this).prop("multiple")?"":c(this).find("option:first").val();c(this).val(t)})),e.container.addClass("visible").appendTo("body").objView(!0),e.setPosition(t,o),s.lastID++,s.length++,e.id=s.lastID,(s[s.lastID]=e).options.dispatchEvent){case!1:case"click":case"contextmenu":e.options.autoClose&&setTimeout(function(){let o=!1;c(document).on("mousedown.cbbdropdown"+e.id,function(t){t=c(t.target);o=!(t.closest(".cbb-dropdown").length||t.closest(e.element).length||(t.closest(".cbb-overlay").length||t.closest(".cbb-dialog, .cbb-modal-dialog").length)&&!e.element.closest(".cbb-dialog").length)}).on("mouseup.cbbdropdown"+e.id,function(){o&&e.close()}),e.container.find(".cbb-menu").length&&e.container.find(".cbb-menu > li > a").on("click",function(){e.close()})},200);break;case"hover":e.leaveTimer=setInterval(function(){var t=c(e.mouseTarget);t.closest(".cbb-dropdown").length||t.closest(e.element).length||e.close()},700),c(document).on("mousemove.cbbdropdown"+e.id,function(t){e.mouseTarget=t.target})}e.options.autoFocus&&setTimeout(function(){var t=!0===e.options.autoFocus?":first":e.options.autoFocus,t=e.container.find("input, textarea").filter(t),o=t.val();t.focus().cbbCaret(o.length)}),n.browser.isMobile?c(window).on("orientationchange.cbbdropdown"+e.id,c.proxy(e,"close")):(c(document).on("scroll.cbbdropdown"+e.id,c.proxy(e,"close")),c(window).on("resize.cbbdropdown"+e.id,c.proxy(e,"close")))},close:function(t){if(!(this.mouseTarget=null)!==t||this.options.autoClose){if(this.id<s.lastID)for(var o=s.lastID;o>this.id;o--)s[o].close();this.id==s.lastID&&s.lastID--,s.length--,delete s[this.id],clearInterval(this.leaveTimer),clearTimeout(this.triggerTimer),this.container.removeClass("visible").detach(),"function"==typeof this.options.onClose&&this.options.onClose.call(this);var t="mousedown.cbbdropdown{id} mouseup.cbbdropdown{id} scroll.cbbdropdown{id} mousemove.cbbdropdown{id}".replace(/\{id\}/g,this.id),e="resize.dropdown{id} orientationchange.dropdown{id}".replace(/\{id\}/g,this.id);c(document).off(t),c(window).off(e),!1===this.options.dispatchEvent&&this.options.autoDestroy&&this.element.cbbDropdown("destroy")}},setContent:function(t){this.container.children().not(".cbb-dropdown-pointer").remove(),this.container.append(t="string"==typeof t?"<div>"+t+"</div>":t)},setPosition:function(t,o){var e=this.element.offset(),i=this.element.outerWidth(),n=this.element.outerHeight(),s=null,r={left:0,top:0};switch(t=t||this.options.xPosition,o=o||this.options.yPosition,t){case"center":r.left=e.left+i/2-this.container.width()/2;break;case"left":r.left=e.left-5;break;case"right":r.left=e.left+i-this.container.width()+5;break;default:c.isNumeric(t)&&(r.left=t)}switch(o){case"bottom":r.top=e.top+n+10;break;case"top":r.top=e.top-this.container.height()-15;break;default:c.isNumeric(o)&&(r.top=o)}if(!this.options.forcePosition){if(s=null!==this.options.wrapper?{left:(a=this.options.wrapper.offset()).left,right:a.left+this.options.wrapper.width()}:{left:0,right:c(window).width()+c(document).scrollLeft()},("left"==t||"center"==t||c.isNumeric(t))&&r.left+this.container.width()>s.right){if(this.container.width()<=s.right-s.left-10)return this.setPosition(s.right-this.container.width()-10,o);if("resize"==this.options.adjustMethod){var l,a=!1;if(r.left-s.left>s.right-r.left?(l=r.left-s.left-20,a=!0):l=s.right-r.left-20,this.container.width(Math.max(l,this.options.minSize)),l>=this.options.minSize&&!a)return this.setPosition(t,o)}return c.isNumeric(t)?t-=this.container.width():t=e.left+i-this.container.width()+5<0&&this.container.width()<c(window).width()?(c(window).width()-this.container.width())/2+c(document).scrollLeft():"right",this.setPosition(t,o)}if("center"==t&&r.left<0)return this.setPosition(t="left",o);if("top"==o&&r.top<c(document).scrollTop())return this.setPosition(t,o="bottom");if(("bottom"==o||c.isNumeric(o))&&r.top+this.container.height()>c(window).height()+c(document).scrollTop()&&e.top-this.container.height()-15>c(document).scrollTop())return o=c.isNumeric(o)?o-this.container.outerHeight()-5:"top",this.setPosition(t,o)}this.container.removeClass("inbottom intop").addClass("in"+(r.top<e.top?"top":"bottom")).css(r).children(".cbb-dropdown-pointer").css("left",e.left+i/2-r.left)},_recall:function(t){c.extend(this.options,t),n.browser.isMobile&&"hover"==this.options.dispatchEvent&&(this.options.dispatchEvent="contextmenu")}}),n.dropdownCloseAll=()=>{s.length&&s[0].close()}})(jQuery,cbbCore);

var FLAG_ADDWHITESPACES=1,FLAG_CURSORTOEND=2,FLAG_NOCONVERTLIST=4,FLAG_ALLOWMULTIPLELEVELS=8;((l,c)=>{var i={width:"100%",height:!1,format:"phpbb",icons:"phpbb",plugins:"phpbb",emoticonsCompat:!0,autofocus:!0,enablePasteFiltering:!0,toolbar:[],style:"",emoticons:{hidden:{}}},t={basicButton:'<a href="#" class="cbb-btn" data-code="<%code%>" title="<%title%>"><i class="fa <%icon%>"></i></a>',imgMenu:'<label><%L_URL%></label> <input type="text" name="link" class="cbb-inputbox" placeholder="https://" /><div class="submit-buttons"><button type="button" class="cbb-btn"><%L_INSERT%></button></div>',quoteMenu:'<label><%L_AUTHOR%></label> <input type="text" name="author" class="cbb-inputbox" /><label><%L_DATE%></label><input type="date" name="date" class="cbb-inputbox" /><div class="submit-buttons"><button type="button" class="cbb-btn"><%L_INSERT%></button></div>',urlMenu:'<label><%L_URL%></label> <input type="text" name="link" class="cbb-inputbox" placeholder="https://" /><label><%L_DESCRIPTION_OPTIONAL%></label><input type="text" name="desc" class="cbb-inputbox" /><div class="submit-buttons"><button type="button" class="cbb-btn"><%L_INSERT%></button></div>'};function u(t){this.tokens=[],this.getTokens=function(t){for(var e,n,o,i,s=/\[(\/)?([0-9a-z]+)((?:=|\s).*?)?\]/gi,a=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,r=[];null!==(e=s.exec(t));)if(e[1]){for(o=r.length-1;-1<o;o--)if(r[o].name==e[2]&&void 0===r[o].closeAt){r[o].closeAt=e.index;break}}else{if(i={},e[3])if("="==e[3].charAt(0))i.defaultAttr=e[3].slice(1);else for(;null!==(n=a.exec(e[3]));)i[n[1]]=n[3]||n[4];r.push({match:e[0],name:e[2],openAt:e.index,parameters:i})}for(this.tokens=[],o=0;o<r.length;o++)void 0!==r[o].closeAt&&r[o].openAt<r[o].closeAt&&this.tokens.push(r[o])},this.closest=function(t,e){for(var n=this.tokens.length-1;-1<n;n--)if(this.tokens[n].openAt+this.tokens[n].match.length<=e.start&&this.tokens[n].closeAt>=e.end&&(null===t||this.tokens[n].name==t))return this.tokens[n];return null},this.getTokens(t)}var n={__construct:function(t){this.editor=t,this.templates&&l.extend(this.editor.templates,this.templates),"function"==typeof this.init&&this.init()}};window.cbbEditorWrapper={plugins:{}},c.newHandler("cbbEditorWrapper",{defaultOptions:{bbcodeMenu:!1,emoticonContainer:null,plugins:[],requestData:{},toolbar:[],toolbarContainer:null,toolbarExclude:[],showRemoveFormat:!0,showToolbar:!0,type:"basic",parserOptions:{removeEmptyTags:!1,customBBcodes:{}}},bbcodeCommands:{b:"bold",i:"italic",u:"underline",code:"code",quote:"quote",list:"bulletlist","list=1":"orderedlist",img:"image",url:"link",color:"color",size:"size"},init:function(){var e=this;return this.toolbar=l([]),this.plugins={},this.templates=l.extend({},t),this.element.attr("data-type")&&(this.options.type=this.element.attr("data-type")),this.options.plugins.forEach(function(t){e._loadPlugin(t)}),this._initInstance()},addBasicButtons:function(){var e,n,t,o,i,s=this;this.options.showToolbar&&(s.toolbar=l('<div class="editor-wrapper-toolbar"></div>'),this.options.toolbarContainer?s.toolbar.appendTo(this.options.toolbarContainer):this.element.before(s.toolbar),e=c.template.get("editor-bbcodes-"+this.id,!1,!0),-1==l.inArray("*",s.options.toolbar)&&(o=l.inArray("list",s.options.toolbar),t=l.inArray("list=1",s.options.toolbar),-1!=(o=Math.max(o,t)))&&s.options.toolbar.splice(o+1,0,"*"),s.options.toolbar.length?l.each(s.options.toolbar,function(){if("|"==this)return!0;var t=e.filter('[data-code="'+this+'"],[data-code="'+this+'="]');t.length&&-1==s.options.toolbarExclude.indexOf(this)&&s.toolbar.append(t)}):(n=[],e.each(function(){var t=l(this).attr("data-code");if(!t||-1!=s.options.toolbarExclude.indexOf(t))return!0;s.options.bbcodeMenu&&l(this).attr("data-custom")?n.push(this):s.toolbar.append(this)}),s.options.bbcodeMenu&&n.length&&(1==n.length?s.toolbar.append(n[0]):(t=e.filter('[data-menu="custom-bbcodes"]'),o=l('<div class="cbb-helper-hidden"></div>'),i=l('<ul class="cbb-menu"></ul>'),n.forEach(t=>{var e=l("<div>"+t.innerHTML+"</div>");e.has("img")&&t.hasAttribute("data-tag")&&e.append("<span>"+t.getAttribute("data-tag").charAt(0).toUpperCase()+t.getAttribute("data-tag").slice(1)+"</span>"),i.append('<li><a href="#" data-code="'+t.getAttribute("data-code")+'">'+e.html()+"</a></li>")}),s.toolbar.append(t),i.css("max-height",150),o.append(i).appendTo(s.toolbar),t.cbbDropdown({class:"cbb-bbcode-dropdown"})))),s.registerToolbarBtn("size",function(t){t.change(function(t){t.preventDefault();t=l(this).val();s.insertBBcode("size",t),s.triggerEvent("commandExec","size",t),l(this).val(100)})}),s.registerToolbarBtn("color",function(t){t.cbbColorPicker({realTimeUpdate:!1,onChange:function(t){s.insertBBcode("color",t),s.triggerEvent("commandExec","color",t)}})}),s.registerToolbarBtn("url","urlMenu",function(t){if(t.link)return s.insertBBcode("url",{defaultAttr:t.desc?t.link:null,inner:t.desc||t.link}),!0}),s.registerToolbarBtn("img","imgMenu",function(t){if(t.link)return s.insertBBcode("img",{inner:t.link}),!0}),s.registerToolbarBtn("quote","quoteMenu",function(t){var e;return t.date&&(e=Math.floor(new Date(t.date).getTime()/1e3)),s.insertBBcode("quote",{defaultAttr:t.author,time:e}),!0}),s.triggerEvent("afterAddButton"),s.toolbar.children("button, a").addClass("cbb-btn"),s.toolbar.find("button[data-code], a[data-code]").filter(function(){return!l(this).data("cbbDropdown")&&!l(this).data("hasCustomListener")}).click(function(t){t.preventDefault();var e,n,t=l(this).attr("data-code");"removeformat"==t?s.removeFormat():"*"==t?s.insertText("[*]"):(n=null,1<(e=t.split("=")).length&&(t=e[0],n=e[1]),s.insertBBcode(t,n)),s.triggerEvent("commandExec",t)})),c.template.remove("editor-bbcodes-"+this.id)},registerToolbarBtn:function(n,t,o){var i,s,a=this,e=a.toolbar.find('[data-code="'+n+'"], [data-code="'+n+'="]');"function"==typeof t?t.call(a,e):(s=!1,"string"==typeof(i=t)&&(i=a.getTemplate(i,!1,!0)),s=i.is(".cbb-menu"),e.cbbDropdown({autoFocus:!s,autoClean:!0,class:"editor-dropdown",selector:"auto",onCreate:function(){var t,e=this;s?this.setContent(i):(t=l('<form onsubmit="return false;"></form>').append(i),this.setContent(t)),e.container.find(".submit-buttons button, a[data-action]").click(function(t){t.preventDefault();t=s?l(this):e.container.find("form").serializeObject();a.triggerEvent("commandExec",n,t),!0===o.call(a,t,e)&&e.close()})}}))},getEditorCommands:function(){var s,t,a=this,r={},e=!0;a.options.showToolbar&&(s=c.template.get("editor-bbcodes-"+this.id,!1,!0),a.options.toolbar.length||(s.filter("[data-code]").each(function(){var t=l(this).attr("data-code");if("*"==(t=t.replace(/=$/,""))||"removeformat"==t||-1<a.options.toolbarExclude.indexOf(t))return!0;a.options.toolbar.push(t)}),e=!1),l.each(a.options.toolbar,function(t,e){var n=s.filter('[data-code="'+e+'"], [data-code^="'+e+'="]');if("|"==e||!n.length||-1!=a.options.toolbarExclude.indexOf(e))return!0;var o=n.children(),i="";o.is(".fa")?(i=o.attr("class"),i=l.trim(i.replace(/fa(\s|-fw)/g,""))):o.is("img")?i=o.attr("src"):o.is("svg")&&(i=o.get(0).outerHTML),"size"==e&&(a.options.fontSizes={},n.children("option").each(function(){a.options.fontSizes[this.value]=this.innerText})),(r={tag:e,code:a.bbcodeCommands[e]||null,icon:i,tooltip:n.attr("title")}).name=o=r.code||r.tag,r.icon&&"color"!=o&&(sceditor.icons.phpbb.icons[o]=r.icon),null===sceditor.command.get(o)&&(r.exec="plain",r.txtExec=["["+r.tag+"]","[/"+r.tag.replace(/=.*/,"")+"]"],sceditor.formats.phpbb.set(o,{})),sceditor.command.set(o,r)}),l.each(a.options.toolbar,function(t,e){a.bbcodeCommands[e]?a.options.toolbar[t]=a.bbcodeCommands[e]:-1!=e.indexOf("=")&&(a.options.toolbar[t]=e.replace(/=.*/,""))}),(t=-1)!=(t=l.inArray("link",a.options.toolbar))&&a.options.toolbar.splice(t+1,0,"unlink"),e||(a.options.toolbar.push("|"),a.options.showRemoveFormat&&a.options.toolbar.push("removeformat"),["print","maximize","source"].forEach(function(t){-1==a.options.toolbarExclude.indexOf(t)&&a.options.toolbar.push(t)})),a.triggerEvent("afterAddCommand"))},insertText:function(t,e,n){switch(this.options.type){case"basic":var o,i=this.element.cbbCaret();i.start+=t.length,i.end=i.start,o=null==e?i.replace(t):(o=i.text,-1!=t.indexOf("list")&&!1!==n&&(o=this._convertListItems(o)),i.end+=o.length,i.replace(t+o+e)),this.element.val(o).cbbCaret(i.start,i.end,!0);break;case"advanced":this.sceditor.insert(t,e,n)}this.triggerEvent("textchange")},insertBBcode:function(t,e,n,o){if("basic"==this.options.type||"advanced"==this.options.type&&this.sceditor.inSourceMode()||o){var o=(o="advanced"==this.options.type?this.sceditor.getSource():o)?l(o):this.element,i=o.cbbCaret(),s=o.val(),a=this.insertBBcodeInText(t,e,s,i,n);if(s==a)return!1;o.val(a).cbbCaret(i)}else if("advanced"==this.options.type){s=this._buildBBcode(t,e);if(!(n&FLAG_ALLOWMULTIPLELEVELS)&&sceditor.dom.closest(this.sceditor.currentNode(),"[data-bbcode="+t+"]"))return!1;s.inner?this.sceditor.insert(s.open+s.inner+s.close):this.sceditor.insert(s.open,s.close)}this.triggerEvent("textchange")},insertBBcodeInText:function(t,e,n,o,i){var s,a,r=new u(n),l="",c="",d="",p=null,e=(i=i||0,this._buildBBcode(t,e,!0)),r=r.closest(t,o);return null===r||i&FLAG_ALLOWMULTIPLELEVELS||o.start!=o.end&&(o.start!=r.openAt+r.match.length||o.end!=r.closeAt)?(s=e.inner||n.substring(o.start,o.end),a="","list"!=t||i&FLAG_NOCONVERTLIST||(a=this._convertListItems(s),o.end+=a.length-s.length),l=n.substring(0,o.start),d=n.substring(o.end),c=e.open+(a||s)+e.close,e.inner?o.start=o.end=o.start+c.length:(p=e.open.length,i&FLAG_CURSORTOEND&&(o.end+=e.close.length)),i&FLAG_ADDWHITESPACES&&(l&&" "!=l.slice(-1)&&(l+=" ",o.start++,o.end++)," "!=d.charAt(0))&&(c+=" ",o.end++),i&FLAG_CURSORTOEND&&(o.start=o.end)):(l=n.substring(0,r.openAt),d=n.substring(r.closeAt),e.inner?(c=e.open+e.inner,o.start=o.end=r.openAt+e.open.length+e.inner.length):(c=e.open+n.substring(r.openAt+r.match.length,r.closeAt),p=e.open.length-r.match.length)),null!==p&&(o.start+=p,o.end+=p),l+c+d},removeFormat:function(){var t=this.element.cbbCaret(),e="";t.text?e=t.text:(e=this.element.val(),this.element.cbbCaret(0,e.length)),e=this.clearBBcode(e),this.insertText(e)},clearBBcode:function(t){return t.replace(/\[\/?[a-z0-9-_*]+.*?\]/gi,"")},getTemplate:function(t,e,n){var o=c.template.get("editor-"+t,e);return o||void 0===this.templates[t]||(o=c.template.parse(this.templates[t],e)),n?l(o):o},hasHandler:function(t){for(var e in this.plugins)if("function"==typeof this.plugins[e][t])return!0;return!1},triggerEvent:function(t){var e,n="event"+t.charAt(0).toUpperCase()+t.slice(1);for(e in this.plugins)"function"==typeof this.plugins[e][n]&&this.plugins[e][n].apply(this.plugins[e],Array.prototype.slice.call(arguments,1));c.dispatchEvent("core.editor."+n,this)},_bindEmoticons:function(){var e=this;this.options.emoticonContainer&&(l(this.options.emoticonContainer).find("a[data-code]").click(function(t){t.preventDefault();t=" "+l(this).attr("data-code")+" ";"advanced"!=e.options.type||e.sceditor.inSourceMode()||(t=t.replace(/\s/g,"&nbsp;")),e.insertText(t,null,!1),e.triggerEvent("commandExec","smiley",t)}),l(this.options.emoticonContainer).cbbLoader({requestData:this.options.requestData,onComplete:l.proxy(this,"_bindEmoticons")}))},_buildBBcode:function(t,e){var n="["+t,o="",i="";return e&&(n+=((i="object"==typeof e?(void 0!==e.inner&&(o=e.inner,delete e.inner),e.defaultAttr&&delete(e=l.extend({"":e.defaultAttr},e)).defaultAttr,c.serializeVars(e," ",!1)):"="+e)&&"="!=i.charAt(0)?" ":"")+i),{close:"[/"+t+"]",inner:o,open:n+="]"}},_convertListItems:function(t){if(!t)return"";for(var e=t.split("\n"),n=0;n<e.length;n++)"[*]"!=e[n].substring(0,3)&&(e[n]="[*]"+e[n]);return e.join("\n")},_initInstance:function(){if("advanced"==this.options.type&&void 0===window.sceditor&&this.options.type,!this.element.is("textarea"))return!0;switch(this.id=this.options.id||this.element.attr("id").replace("editor-",""),this.options.type){case"basic":this.addBasicButtons();break;case"advanced":var t,e,n,o;this.element.get(0)._sceditor||(this.getEditorCommands(),t=this.element.get(0),e="sceditor-doc",n=l.extend(!0,{rtl:c.isRtl()},i,this.options),l("html").is(".dark-theme")&&(e+=" dark-theme"),sceditor.create(t,n,this),this.sceditor=t._sceditor,o=t._sceditor.getContentAreaContainer().contentDocument,l(o.documentElement).addClass(e),l(o.body).addClass("sceditor-body content"),l.each(n.stylesheets,function(){c.loadStylesheet(this,o)}));break;case"event":break;default:return!1}this._bindEmoticons()},_loadPlugin:function(t){var e;window.cbbEditorWrapper.plugins[t]&&void 0===this.plugins[t]&&((e=function(){this.__construct.apply(this,arguments)}).prototype=l.extend(!0,{},n,window.cbbEditorWrapper.plugins[t]),this.plugins[t]=new e(this))},_recall:function(t){var e=this;t.plugins&&(t.plugins.forEach(function(t){e._loadPlugin(t)}),delete t.plugins),"event"==this.options.type&&"event"!=t.type&&(l.extend(this.options,t),this._initInstance())}})})(jQuery,cbbCore);

((o,l)=>{var h=!1,r=null,d=100,c='<div class="rsz-container"></div>',m='<i class="fa fa-external-link" aria-hidden="true"></i>',g='<div id="rsz-overlay" class="cbb-overlay"></div>',u='<div id="rsz-img"><a class="rsz-close" href="#" ><i class="fa fa-remove" aria-hidden="true"></i></a><div class="rsz-arrows cbb-group"><a href="#" class="cbb-btn cbb-helper-hidden" data-action="prev"><i class="fa fa-chevron-left" aria-hidden="true"></i></a><a href="#" class="cbb-btn cbb-helper-hidden" data-action="next"><i class="fa fa-chevron-right" aria-hidden="true"></i></a></div></div>';l.newHandler("cbbImageGallery",{defaultOptions:{maxWidth:null,imageSelector:"img"},init:function(){for(var n,i,h=this,t=(null!==this.options.maxWidth&&(this.options.maxWidth=l.intval(this.options.maxWidth)),this._album=[],this._dialog=null,this.element);i=Math.max(0,parseInt(t.innerWidth())-30),t=t.parent(),!i&&!t.is("body"););n=i&&this.options.maxWidth>i?i:this.options.maxWidth,"auto"==this.options.maxWidth&&(this.options.maxWidth=i),this.element.find(this.options.imageSelector).off("click.imageGallery").each(function(){var i=o(this),t=h._album.length;if(i.is(".smilies")||i.is(".js-gallery-ignore"))return!0;var e,a,s=new Image;if(s.src=this.src,s.onload=function(){h._album[t].width=this.width,h._album[t].height=this.height},i.data("imageIndex",t),h._album.push({image:i,width:0,height:0,isSvg:-1!=this.src.indexOf(".svg")}),(h.options.maxWidth||null===h.options.maxWidth)&&!i.is(".js-resized")){if(null!==h.options.maxWidth){if(i.is(".js-no-resize"))return!0;var s=l.intval(i.attr("width"))||i.width();if(s&&s<=n)return i.addClass("js-no-resize"),!0}null!==h.options.maxWidth||i.parent().is("a")?(s=o(c),a=(e=i).clone(!0),s.append(a),h._album[t].image=a,i.parent().is("a")&&(e=i.parent("a")).clone(!0).removeClass().addClass("cbb-btn rsz-link").html(m).appendTo(s),e.replaceWith(s),null!==h.options.maxWidth&&a.css({"max-width":n,height:h._album[t].isSvg?n/2:"auto"})):a=i,a.on("click.imageGallery",o.proxy(h,"open")).addClass("js-resized rsz-cursor-zoom")}})},open:function(i){i.preventDefault();var e=this,t=o(i.target);if(!t.is(".js-resized")||h)return!1;var a=t.offset(),s=t.data("imageIndex"),n=this.getFinalDimensions(s),i=(o("object").css("visibility","hidden"),h=!0,o(g).appendTo("body").fadeIn("fast"),o('<img src="'+i.target.src+'" alt="" />'));this._dialog=o(u).css({left:a.left,top:a.top,width:t.width(),height:t.height()}).append(i).appendTo("body").show().animate(n,300,function(){o(this).children("img, .rsz-close").show(),o(window).on("resize.imageGallery",e.close)}),this.adjustDialogItems(s,i),r={index:t.data("imageIndex")},o("#rsz-overlay, .rsz-close").click(function(i){i.preventDefault(),o(this).off(),e.close()}),1<e._album.length&&(this._dialog.find('[data-action="next"], [data-action="prev"]').objView(!0),o(document).on("keyup.imageGallery",function(i){var t=!0;switch(i.which){case 27:e.close();break;case 37:e.changeImage(r.index-1);break;case 39:e.changeImage(r.index+1);break;default:t=!1}t&&i.preventDefault()})),o("[data-action]",this._dialog).click(function(i){switch(i.preventDefault(),o(this).attr("data-action")){case"next":e.changeImage(r.index+1);break;case"prev":e.changeImage(r.index-1)}})},changeImage:function(i){if(null===r||void 0===this._album[i])return!1;var t=this._album[i],e=this.getFinalDimensions(i);this._dialog.children("img, .rsz-close").hide().filter("img").attr("src",t.image.attr("src")),this.adjustDialogItems(i,this._dialog.children("img")),this._dialog.animate(e,300,function(){o(this).children("img, .rsz-close").show()}),r.index=i},close:function(){h&&(o("#rsz-overlay, #rsz-img").remove(),h=!1,r=null,this._dialog=null,o(window).off("resize.imageGallery"),o(document).off("keyup.imageGallery"),o("object").css("visibility","visible"))},adjustDialogItems:function(i,t){i=this._album[i];i.width<d?t.addClass("rsz-image-centered").css({"max-height":Math.min(d,i.height),"max-width":Math.min(d,i.width)}):t.removeClass("rsz-image-centered").removeStyle("max-height max-width")},getFinalDimensions:function(i){var t,e=o(window).width(),a=o(window).height(),s=e-40,n=a-70,h=this._album[i].width,i=this._album[i].height,s=(s<h&&(h*=t=s/h,i*=t),n<i&&(h*=t=n/i,i*=t),Math.max(d,i+10)),n=Math.max(d,h+10);return{height:s,left:e/2-n/2+o(document).scrollLeft(),top:a/2-s/2+o(document).scrollTop()-15,width:n}},_recall:function(i){var t;o.extend(this.options,i),null!==this.options.maxWidth&&(i=Math.max(0,parseInt(this.element.innerWidth())-30),t=i&&this.options.maxWidth>i?i:this.options.maxWidth,this.element.find(this.options.imageSelector).each(function(){o(this).width()>t&&o(this).css({width:t,height:"auto"})}))}})})(jQuery,cbbCore);

((n,s)=>{var e="cbb-color-picker",h=30,r=[];s.newHandler("cbbColorPicker",{defaultOptions:{color:null,inline:!1,height:150,width:180,realTimeUpdate:!0,showInput:!0,showOnCreate:!1,onChange:null,onRender:null},init:function(){var i=this;if(this.inDrag=!1,this._reset(),this.options.inline)return this.render(this.element);this.originalOnOpen=this.options.onOpen,this.originalOnClose=this.options.onClose;var t={dispatchEvent:!this.options.showOnCreate&&"click",selector:"auto",onOpen:function(){this.container.children("."+e).remove(),i.render(this.container);for(var t=0;t<4;t++)i._setPreset(r[t]||null,void 0===r[t]);"function"==typeof i.originalOnOpen&&i.originalOnOpen.call(this)},onClose:function(){i._reset(),"function"==typeof i.originalOnClose&&i.originalOnClose.call(this)}};this.element.cbbDropdown(n.extend({},this.options,t)),this.options.showOnCreate&&this.show()},show:function(){this.options.inline||this.element.cbbDropdown("open")},close:function(){this.options.inline?this._reset():this.element.cbbDropdown("close")},setColor:function(t,i){t=s.colorToHex(t);var e=this._hexToRgb(t),e=this._rgbToHsv(e);this.color=this.ctx.getImageData(this.options.width-15,this.options.height*e.h,1,1).data,this.selected=e,this._renderColorSaver(),!1!==i&&this._updateInput(t)},render:function(t){var i=this;t.children("."+e).length||(this.container=n("<div />"),this.canvas=n("<canvas />"),this.container.addClass(e).appendTo(t),this.canvas.appendTo(this.container).attr({height:this.options.height,width:this.options.width}),this.ctx=this.canvas.get(0).getContext("2d",{willReadFrequently:!0}),this._renderColorSaver(),this._renderHue(),this.canvas.on({mousedown:n.proxy(this,"_mousedown"),mouseup:n.proxy(this,"_mouseup"),mousemove:n.proxy(this,"_mousemove")}),this.options.showInput&&(this.container.append('<div class="color-picker-form"><div class="presets"></div><input type="text" class="cbb-inputbox" name="hex" size="8" /></div>'),this.hexInput=this.container.find("input[name=hex]"),this.hexInput.on({input:function(){var t=this.value;i._isValidHex(t)&&(i.setColor(this.value,!1),i.options.realTimeUpdate)&&(i._trigger("onChange",s.colorToHex(this.value)),this.focus())},keyup:function(t){13==t.which&&(t.preventDefault(),t=s.colorToHex(this.value),i.options.realTimeUpdate||i._trigger("onChange",t),i._setPreset(t))}})),this.options.color&&this.setColor(this.options.color),this._trigger("onRender"))},_recall:function(t){n.extend(this.options,t),this.show()},_renderColorSaver:function(){var t=this.options.width-h-5,i=(this.ctx.clearRect(0,0,5+t,this.options.height),this.ctx.beginPath(),this.ctx.fillStyle=s.colorToHex(this.color),this.ctx.fillRect(0,0,t,this.options.height),this.ctx.createLinearGradient(0,0,t,0)),i=(i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,t,this.options.height),this.ctx.createLinearGradient(0,0,0,this.options.height));i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,t,this.options.height),this.ctx.closePath(),null!==this.selected&&(void 0!==this.selected.h&&void 0===this.selected.x&&n.extend(this.selected,this._svToDot(this.selected)),.5<this.selected.v&&this.selected.s<.5?this.ctx.strokeStyle="rgba(0, 0, 0, 1)":this.ctx.strokeStyle="rgba(255, 255, 255, 1)",this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.arc(this.selected.x,this.selected.y,4,0,2*Math.PI),this.ctx.stroke(),this.ctx.closePath())},_renderHue:function(){var t=this.options.width-h,i=(this.ctx.clearRect(t,0,h,this.options.height),this.ctx.beginPath(),this.ctx.createLinearGradient(0,0,0,this.options.height));i.addColorStop(0,"rgba(255, 0, 0, 1)"),i.addColorStop(.17,"rgba(255, 255, 0, 1)"),i.addColorStop(.34,"rgba(0, 255, 0, 1)"),i.addColorStop(.51,"rgba(0, 255, 255, 1)"),i.addColorStop(.68,"rgba(0, 0, 255, 1)"),i.addColorStop(.85,"rgba(255, 0, 255, 1)"),i.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=i,this.ctx.fillRect(t,0,h,this.options.height),this.ctx.closePath()},_reset:function(){this.container&&this.container.remove(),this.color=[255,0,0],this.selected=null,this.container=null},_trigger:function(t){var i=Array.prototype.slice.call(arguments,1);this.options[t]&&"function"==typeof this.options[t]&&this.options[t].apply(this.element,i)},_mousedown:function(t){this._inColorSaver(t)&&this.options.realTimeUpdate&&(this.inDrag=!0)},_mouseup:function(t){var i;this.inDrag=!1,this._inHue(t)?(i=this.ctx.getImageData(t.offsetX,t.offsetY,1,1).data,this.color=i,this.selected=null,this._renderColorSaver()):this._inColorSaver(t)&&this._changeColor(t)},_mousemove:function(t){this.inDrag&&this._inColorSaver(t)&&this._changeColor(t)},_inHue:function(t){return t.offsetX>=this.options.width-h},_inColorSaver:function(t){return t.offsetX<=this.options.width-h-5},_changeColor:function(t){var i=this.ctx.getImageData(t.offsetX,t.offsetY,1,1).data,e=this._rgbToHsv(i[0],i[1],i[2]),o=s.colorToHex(i);this.selected=n.extend({},e,{x:t.offsetX,y:t.offsetY}),this._renderColorSaver(),this._updateInput(i),-1==n.inArray(o,r)&&this._setPreset(o),this._trigger("onChange",o)},_updateInput:function(t){this.options.showInput&&this.hexInput.val(s.colorToHex(t))},_setPreset:function(t,i){var e=this,o=this.container.find(".presets"),s=(3<r.length&&!1!==i&&(r.shift(),o.children(":first").remove()),n('<a href="#"></a>'));o.append(s),null!==t&&s.attr("data-color",t).css("background-color",t),s.click(function(t){t.preventDefault();t=n(this).attr("data-color");t&&(e.setColor(t),e._trigger("onChange",t))}),!1!==i&&r.push(t)},_hexToRgb:function(t){return/^#?([0-9A-F]{3}){1,2}$/i.test(t)?{r:(t=parseInt("#"==t.charAt(0)?t.slice(1):t,16))>>16,g:t>>8&255,b:255&t}:{r:0,g:0,b:0}},_rgbToHsv:function(t,i,e){t&&void 0===i&&void 0===e&&(i=t.g,e=t.b,t=t.r),t/=255,i/=255,e/=255;var o,s=Math.max(t,i,e),n=Math.min(t,i,e),h=s,r=s-n,a=0==s?0:r/s;if(s==n)o=0;else{switch(s){case t:o=(i-e)/r+(i<e?6:0);break;case i:o=(e-t)/r+2;break;case e:o=(t-i)/r+4}o/=6}return{h:o,s:a,v:h}},_svToDot:function(t){for(var i=this.options.width-h-5,e=0;e<i;e++)for(var o=0;o<i;o++){var s=Math.abs(0-o)/i,n=Math.abs(this.options.height-e)/i,s=Math.abs(s-t.s),n=Math.abs(n-t.v);if(s<.01&&n<.01)return{x:o,y:e}}return{x:0,y:this.options.height}},_isValidHex:function(t){return/^#((?:[0-9A-F]{3}){1,2})$/i.test(t)}})})(jQuery,cbbCore);

((i,o)=>{o.newHandler("cbbLoader",{defaultOptions:{requestData:{},replace:!1,paginationSelector:".pagination a",loadOnInit:!1,onComplete:null},init:function(){this.options.loadOnInit?(this.element.cbbLoading(!0,!1),this._send()):this.bind()},bind:function(){this.options.paginationSelector&&this.element.find(this.options.paginationSelector).click(i.proxy(this,"_dispatchPagination"))},_dispatchPagination:function(n){n.preventDefault();var t="",e={},n=n.target.href;if(-1!==(i=n.indexOf("#")))e=o.unserializeVars(n.substring(i+1).replace(/^\?/,""));else{var i=n.split("?");if(2!==i.length)return;t=i[0],e=o.unserializeVars(i[1])}e.pagination=1,this.element.cbbLoading(),this._send(e,t)},_send:function(n,t){var e=this;n=i.extend(!0,{},e.options.requestData,n),o.request({url:t,data:n,showLoading:!1,onSuccess:function(n){e.options.replace?e.element.replaceWith(n.htmlContent):(e.element.html(n.htmlContent),e.bind()),"function"==typeof e.options.onComplete&&e.options.onComplete.call(e,n)}})}})})(jQuery,cbbCore);

(l=>{cbbCore.newHandler("cbbTabs",{init:function(){var t,i,a=this,e="",n=window.location.href;if(this.initialTab=null,(t=this.element.children()).length<2)return!0;this.element.objView(!0).addClass("cbb-tabs"),(i=t.filter(":first")).addClass("cbb-tabs-nav").html(i.html().replace(/[\r|\n|\t]+/g,"")),this.tabs=i.find("li:not(.tab-title) > a");for(var s=1;s<t.length;s++)l(t[s]).objView(!1);-1!=(i=n.indexOf("#"))&&(e=n.substring(i)),this.tabs.each(function(){var t=l(this),i=(i=t.attr("href")).substring(i.indexOf("#")),i=(e&&e==i&&(a.initialTab=t),a.element.find(i));t.data("container",i).click(l.proxy(a,"dispatch")),i.addClass("cbb-tabs-panel")}),null===this.initialTab&&(this.initialTab=this.tabs.filter(":first")),this.initialTab.click()},dispatch:function(t){l(t.target).is("input")||(t.preventDefault(),(t=l(t.currentTarget)).is(".active"))||(this.tabs.removeClass("active"),t.addClass("active"),t.data("container").objView(!0).siblings(".cbb-tabs-panel").objView(!1))}})})(jQuery);

((o,e)=>{let c=e.colorToHex(o("body").css("background-color")),t=o("body").css("color"),r=null,a=o('<ul class="topiclist forums"></ul>');a.css({position:"absolute",visibility:"hidden"}).appendTo("body"),r=e.colorToHex(a.css("background-color")),a.remove(),(r=r&&"#00000000"!=r&&r!=c?r:e.colorToHex(o(".wrap").css("background-color")))&&"#00000000"!=r&&(c=r),e.colourIsDark(c,170)&&!e.colourIsDark(t,65)?o("html").addClass("dark-theme"):e.colourIsDark(t,100)||o("html").addClass("medium-dark-theme"),o("#phpbb").addClass(e.isTouchDevice()?"hastouch":"notouch");var d=o("#core-lang");d.length&&(e.lang(e.strToJson(d.html())),d.remove()),!1!==window.coreAutoExecute&&o(document).ready(function(){e.execute()}),o(window).on("load.cbbcore",function(){cbbCore.dispatchEvent("core.onload")}),e.execute=function(){-1!=window.location.href.indexOf("adm/")&&e.adminInit(),o(".cbb-switch input[data-url]").change(function(){e.request({url:o(this).attr("data-url"),data:{status:o(this).prop("checked")?1:0}})}),o("body").markSelector(),e.bindSearchInput(),e.executePostponedCode(),e.dispatchEvent("core.onready")}})(jQuery,cbbCore);